# ุชุนูููุงุช ุงูุชุญุฏูุซ ุงูุชููุงุฆู ูู API ุญุฐู ุงูุญุณุงุจ

## โ ุชู ุฅุนุฏุงุฏ ุงูุชุญุฏูุซ ุงูุชููุงุฆู

ุงูุขู ููููู ุชุญุฏูุซ ุงููุญุฏุฉ ุชููุงุฆูุงู ูุณูุชู ุฅูุดุงุก ุฌุฏูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชููุงุฆูุงู!

## ๐ ุฎุทูุงุช ุงูุชุญุฏูุซ:

### 1. ุชุญุฏูุซ ุงููุญุฏุฉ
```bash
php bin/magento setup:upgrade
```

### 2. ูุณุญ Cache
```bash
php bin/magento cache:clean
php bin/magento cache:flush
```

### 3. ุงุฎุชุจุงุฑ API
```bash
curl -X POST "https://avit.josequal.net/rest/V1/user/request-account-deletion" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"reason": "test"}'
```

## ๐ ูุง ุชู ุฅุนุฏุงุฏู:

### ูููุงุช Schema:
- โ `etc/db_schema.xml` - ุชุนุฑูู ุงูุฌุฏูู
- โ `etc/db_schema_whitelist.json` - ูุงุฆูุฉ ุงูุจูุถุงุก ููุฌุฏูู
- โ `etc/crontab.xml` - Cron Job ููุญุฐู ุงูุชููุงุฆู

### ูููุงุช API:
- โ `Api/V1/AccountDeletionInterface.php` - ูุงุฌูุฉ API
- โ `Model/AccountDeletion.php` - Model ููู API
- โ `Service/AccountDeletionService.php` - ููุทู ุงูุฃุนูุงู

## ๐ ููููุฉ ุนูู ุงูุชุญุฏูุซ:

1. **`setup:upgrade`** ููุฑุฃ `db_schema.xml`
2. **ููุงุฑู** ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุญุงููุฉ
3. **ููุดุฆ** ุงูุฌุฏุงูู ุงูููููุฏุฉ ุชููุงุฆูุงู
4. **ูุญุฏุซ** ุงูุฌุฏุงูู ุงูููุฌูุฏุฉ ุฅุฐุง ูุฒู ุงูุฃูุฑ

## ๐ ูููู ุงูุฌุฏูู ุงูุฐู ุณูุชู ุฅูุดุงุคู:

```sql
customer_account_deletion
โโโ entity_id (Primary Key)
โโโ customer_id (Foreign Key)
โโโ deletion_requested_at (Timestamp)
โโโ scheduled_deletion_at (Timestamp)
โโโ status (1=Pending, 2=Cancelled, 3=Completed)
โโโ reason (Text)
โโโ cancelled_at (Timestamp)
โโโ deleted_at (Timestamp)
```

## ๐ฏ ุงูููุฒุงุช:

- **ุฅูุดุงุก ุชููุงุฆู** ููุฌุฏูู
- **ูุชุฑุฉ ุงูุชุธุงุฑ 90 ููู** ูุจู ุงูุญุฐู
- **ุชุนุทูู ุงูุญุณุงุจ** ุฎูุงู ูุชุฑุฉ ุงูุงูุชุธุงุฑ
- **ุฅููุงููุฉ ุงูุงุณุชุฑุฌุงุน** ูู ุฃู ููุช
- **ุญุฐู ุชููุงุฆู** ุนุจุฑ Cron Job
- **ุฃูุงู ูุงูู** ูุน Bearer Token

## โ๏ธ ููุงุญุธุงุช ูููุฉ:

- ุชุฃูุฏ ูู ูุฌูุฏ **Token ุตุญูุญ** ูู ุชุณุฌูู ุงูุฏุฎูู
- ุชุฃูุฏ ูู ุฃู ุฌุฏูู `customer_entity` ููุฌูุฏ
- ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉุ ุฑุงุฌุน ุณุฌูุงุช ุงูุฎุทุฃ ูู `var/log/`

## ๐ ุงููุชูุฌุฉ:

ุจุนุฏ ุชุดุบูู `setup:upgrade`ุ ุณูุนูู API ุญุฐู ุงูุญุณุงุจ ุชููุงุฆูุงู ุจุฏูู ุฃู ุชุฏุฎู ูุฏูู!
